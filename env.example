# ===========================================
# MissiveAttachmentDownloader Configuration
# ===========================================

# PostgREST endpoint (required)
# Dedicated PostgREST instance for MAD
POSTGREST_URL=https://postgrest-mad.ibhelm.de

# MAD Service Secret (required)
# This single secret is used for:
#   1. API authentication (X-API-Key header to PostgREST proxy)
#   2. Database role password (mad_downloader role in PostgreSQL)
# Keep this secret secure - it provides full MAD access.
MAD_SERVICE_SECRET=your-mad-service-secret

# Missive API (required for refreshing expired signed URLs)
MISSIVE_API_TOKEN=your-missive-api-token

# Attachment storage path on host (required)
HOST_ATTACHMENT_PATH=/volume1/email_attachments

# ===========================================
# Worker Settings
# ===========================================

# Polling interval in seconds (default: 5)
POLL_INTERVAL=5

# Number of attachments to fetch per batch (default: 10)
BATCH_SIZE=10

# Max retries before marking as failed (default: 3)
MAX_RETRIES=3

# ===========================================
# Skip Filters
# ===========================================

# Skip outgoing emails from these domains (comma-separated)
# e.g., @ibhelm.de,@ibhelm.com
SKIP_SENDER_DOMAINS=

# Max characters for subject in folder name (default: 50)
MAX_SUBJECT_LENGTH=50

# ===========================================
# Logging
# ===========================================

LOG_LEVEL=INFO
BETTERSTACK_SOURCE_TOKEN=
BETTERSTACK_INGEST_HOST=

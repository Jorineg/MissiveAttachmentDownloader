services:
  attachment-downloader:
    build: .
    restart: unless-stopped
    environment:
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_SERVICE_KEY=${SUPABASE_SERVICE_KEY}
      - ATTACHMENT_STORAGE_PATH=/data/attachments
      - POLL_INTERVAL=${POLL_INTERVAL:-5}
      - BATCH_SIZE=${BATCH_SIZE:-10}
      - MAX_RETRIES=${MAX_RETRIES:-3}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - BETTERSTACK_SOURCE_TOKEN=${BETTERSTACK_SOURCE_TOKEN:-}
      - BETTERSTACK_INGEST_HOST=${BETTERSTACK_INGEST_HOST:-}
    volumes:
      - ${HOST_ATTACHMENT_PATH}:/data/attachments
      - ./logs:/app/logs
